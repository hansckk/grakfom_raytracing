<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kubus Three.js dengan Kamera Orbit</title>
    <style>
        body { margin: 0; overflow: hidden; } /* Menghilangkan margin dan scrollbar */
        canvas { display: block; } /* Mencegah celah di bawah canvas */
    </style>
</head>
<body>
    <canvas id="myThreeJsCanvas"></canvas>

    <!-- Menggunakan importmap untuk mengelola modul JavaScript ES6 -->
    <script type="importmap">
    {
        "imports": {
            "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
            "three/examples/jsm/controls/OrbitControls.js": "https://unpkg.com/three@0.160.0/examples/jsm/controls/OrbitControls.js"
        }
    }
    </script>

    <script type="module">
        // 1. Impor modul Three.js dan OrbitControls
        import * as THREE from 'three';
        import { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js';

        // 2. Inisialisasi Scene, Kamera, dan Renderer
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0xeeeeee); // Warna latar belakang

        const camera = new THREE.PerspectiveCamera(
            75, // Field of View (FOV)
            window.innerWidth / window.innerHeight, // Aspect Ratio
            0.1, // Near clipping plane
            1000 // Far clipping plane
        );
        camera.position.set(2, 2, 5); // Atur posisi awal kamera

        const canvas = document.getElementById('myThreeJsCanvas');
        const renderer = new THREE.WebGLRenderer({
            canvas: canvas,
            antialias: true // Untuk tepi objek yang lebih halus
        });
        renderer.setSize(window.innerWidth, window.innerHeight);
        // document.body.appendChild(renderer.domElement); // Tidak perlu jika sudah menggunakan elemen canvas yang ada

        // 3. Membuat Geometri dan Material untuk Kubus
        const geometry = new THREE.BoxGeometry(1, 1, 1); // Ukuran kubus (lebar, tinggi, kedalaman)
        
        // Material dasar, tidak terpengaruh cahaya
        // const material = new THREE.MeshBasicMaterial({ color: 0x00ff00 }); 
        
        // Material standar, akan bereaksi terhadap cahaya
        const material = new THREE.MeshStandardMaterial({
            color: 0x0077ff, // Warna biru
            roughness: 0.5,   // Seberapa kasar permukaan
            metalness: 0.5    // Seberapa metalik permukaan
        });

        const cube = new THREE.Mesh(geometry, material);
        scene.add(cube); // Tambahkan kubus ke scene

        // 4. Menambahkan Cahaya (Opsional, tapi bagus untuk MeshStandardMaterial)
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.5); // Cahaya ambient
        scene.add(ambientLight);

        const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8); // Cahaya dari arah tertentu
        directionalLight.position.set(5, 10, 7.5);
        scene.add(directionalLight);

        // 5. Mengimplementasikan OrbitControls
        const controls = new OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true; // Efek "melayang" saat kontrol dilepas (membutuhkan update di loop animasi)
        controls.dampingFactor = 0.05;
        controls.screenSpacePanning = false; // Mengatur bagaimana panning bekerja
        controls.minDistance = 2; // Jarak zoom minimal
        controls.maxDistance = 10; // Jarak zoom maksimal
        // controls.maxPolarAngle = Math.PI / 2; // Batasi agar tidak bisa melihat dari bawah (opsional)

        // 6. Menangani Perubahan Ukuran Jendela
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        // 7. Loop Animasi
        function animate() {
            requestAnimationFrame(animate); // Meminta browser untuk menjalankan fungsi ini pada frame berikutnya

            // Animasi kubus (opsional)
            cube.rotation.x += 0.005;
            cube.rotation.y += 0.005;

            controls.update(); // Penting jika enableDamping = true

            renderer.render(scene, camera); // Render scene dari sudut pandang kamera
        }

        animate(); // Mulai loop animasi
    </script>
</body>
</html>